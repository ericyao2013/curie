#!/bin/sh

splint_params='-Iinclude -export-local'
splint_params_posix='+posixstrictlib'
splint_params_atomic='+nolib'

splint ${splint_params} ${splint_params_atomic} $(find ./include ./src \( -name "*.c" -o -name "*.h" \) -a \! \( -path "./src/generic/atom.c" -o -path "./src/generic/memory.c" \))
splint ${splint_params} ${splint_params_posix} src/generic/atom.c src/generic/memory.c

for i in tests/*.c; do
  splint ${splint_params} ${splint_params_atomic} "${i}"
done
